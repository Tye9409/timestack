// Generated by CoffeeScript 1.3.3
((function(){(function(a){return $.fn.extend({timestack:function(a){var b;return b={click:function(a){return console.log(a)},width:"100%",parse:function(a){return moment(a)},format:function(a,b){return""+a.format("MMM YYYY")+" - "+b.format("MMM YYYY")},color:"#eee"},a=$.extend(b,a),this.each(function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;c=$(this),d=c.children("ul"),d.css("width",a.width).addClass("timestack-events"),g=null,k=null,i=d.children("li").map(function(){var b,c;return b=$(this),c={start:a.parse(b.attr("data-start")),end:a.parse(b.attr("data-end")),title:b.attr("data-title"),color:b.attr("data-color")||a.color,li:b},g&&g<c.start||(g=c.start),k&&k>c.end||(k=c.end),c}),f=k-g,r=[];for(p=0,q=i.length;p<q;p++)h=i[p],b=h.li,m=$("<em>("+a.format(h.start,h.end)+")</em>").addClass("timestack-time"),n=$("<span>"+h.title+" </span>").addClass("timestack-title"),j=$("<span></span>").addClass("timestack-label").append(n).append(m),e=b.children().wrapAll("<div class='timestack-content'></div>").parent().hide(),o=((h.end-h.start)/f*100).toFixed(2),l=((h.start-g)/f*100).toFixed(2),r.push(b.prepend(j).css("margin-left",""+l+"%").css("width",""+o+"%").css("background-color",h.color).click(function(b){return function(){return a.click(b.children())}}(e)));return r})}})})(jQuery)})).call(this);